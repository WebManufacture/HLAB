<!DOCTYPE html>
<html>
	<head>
		<title>UART control</title>
		<meta content="text/html; charset=utf-8" http-equiv="Content-Type">
		<link type='text/css' rel='stylesheet' href="http://services.web-manufacture.net/Styles/System.default.css" />
		<link type='text/css' rel='stylesheet' href="Index.css" />
		<script type="text/javascript" src="http://services.web-manufacture.net/Base/v1.4/Utils.js"></script>
		<script type="text/javascript" src="http://services.web-manufacture.net/Base/v1.4/DOM.js"></script>	
		<script type="text/javascript" src="http://services.web-manufacture.net/Base/v1.4/Events.js"></script>
		<script type="text/javascript" src="http://services.web-manufacture.net/Base/v1.4/Log.js"></script>
		<script type="text/javascript" src="http://services.web-manufacture.net/Base/v1.4/Url.js"></script>
		<script type="text/javascript" src="http://services.web-manufacture.net/Base/v1.4/Jasp.js"></script>
		<script type="text/javascript" src="http://services.web-manufacture.net/Base/v1.4/Net.js"></script>
		<script type="text/javascript" src="http://services.web-manufacture.net/Base/v1.4/Modules.js"></script>

		<script src="/socket.io/socket.io.js"></script>
		<style type='text/css'>

		</style>
		<script type='text/javascript'>
			
			WS.DOMload(function(){
				socket = new WebSocket("ws://localhost:5000");
				socket.onopen = (function(s){
					console.log('connected');
				});
				socket.onmessage = function(m){
					var data = JSON.parse(m.data);
					if (typeof data == 'object'){
						if (data.isArray){
							ContentPanel.div(m.data + "");
						}
						else{
							PortName.textContent = data.port + ":" + data.speed;
						}
					}
				};
		
			});
			
				
		</script>
	</head>
	<body class="">
		<include url='http://services.web-manufacture.net/UI/Toolbars.htm'></include>
		<include url='http://services.web-manufacture.net/UI/UiUtils.htm'></include>
		<include url='http://services.web-manufacture.net/UI/HtmlElements.htm'></include>
		<div id='HeaderBar' class='toolbar'>
			<div class='menuitem resume' icon='http://cdn1.iconfinder.com/data/icons/nuove/32x32/actions/player_play.png' onclick="CNC.ProgCommand('resume');">
				Start</div>			
			<div class='menuitem stop' icon='http://cdn5.iconfinder.com/data/icons/48_px_web_icons/48/Signal_stop.png'	onclick="CNC.Command({command:3});">
				Stop</div>
			<div class='menuitem pause' icon='http://cdn1.iconfinder.com/data/icons/humano2/48x48/actions/gtk-media-pause.png' onclick="CNC.ProgCommand('pause');">
				Pause</div>			
			<div class='separator'>
			</div>		
			<div class='separator'>
			</div>
			<div class='menuitem' icon='http://cdn1.iconfinder.com/data/icons/Vista-Inspirate_1.0/48x48/apps/advancedsettings.png' onclick="RoboUI.ShowSettings();">
				Settings
			</div>
		</div>
		<div id='StatusBar'>
				Порт: 
				<div class='sbar-elem port-elem'>
					<span id='PortName'></span>
				</div>
				<div class='sbar-elem command line program-state' style='font-size: 20px; color: gray'>
					(<span id='currentLine'></span>)
				</div>
				<div class='sbar-elem last-command program-state'>
					<span id='currentCommand'></span>
				</div>
			</div>
		<div id='ContentPanel'>
			
		</div>
	</body>
</html>

